{"remainingRequest":"/home/user/Work/ethsender/node_modules/babel-loader/lib/index.js!/home/user/Work/ethsender/node_modules/ts-loader/index.js??ref--15-2!/home/user/Work/ethsender/node_modules/eslint-loader/index.js??ref--14-0!/home/user/Work/ethsender/src/utils/network.ts","dependencies":[{"path":"/home/user/Work/ethsender/src/utils/network.ts","mtime":1643209743819},{"path":"/home/user/Work/ethsender/babel.config.js","mtime":1643121690025},{"path":"/home/user/Work/ethsender/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/user/Work/ethsender/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/user/Work/ethsender/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/user/Work/ethsender/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3VzZXIvV29yay9ldGhzZW5kZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudGltZXJzLmpzIjsKaW1wb3J0IHsgcmVmIH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgd2ViMywgdG9XZWksIGZyb21XZWlUb0d3ZWkgfSBmcm9tICcuL3dlYjMnOwppbXBvcnQgeyBBQ0NFUFRfTkVUV09SSyB9IGZyb20gJy4uL2NvbnN0YW50cy9uZXR3b3JrJzsKaW1wb3J0IHsgZ2V0QWNjb3VudCwgdXBkYXRlQmFsYW5jZSB9IGZyb20gJy4vZ2V0QWNjb3VudCc7CmltcG9ydCB7IGNyZWF0ZU5vdGlmaWNhdGlvbiB9IGZyb20gJy4uL3V0aWxzL25vdGlmaWNhdGlvbic7CmV4cG9ydCB2YXIgbmV0d29yayA9IHJlZihudWxsKTsKZXhwb3J0IHZhciB0cmFuc2FjdGlvbiA9IHJlZih7CiAgZnJvbTogJycsCiAgdG86ICcnLAogIHZhbHVlOiAnJywKICB0eFByb2Nlc3Npbmc6IGZhbHNlCn0pOwpleHBvcnQgdmFyIGNoZWNrTmV0d29yayA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUobmV0d29ya0lkKSB7CiAgICB2YXIgY3VycmVudE5ldHdvcmtJZDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQudDAgPSBOdW1iZXI7CiAgICAgICAgICAgIF9jb250ZXh0LnQxID0gbmV0d29ya0lkOwoKICAgICAgICAgICAgaWYgKF9jb250ZXh0LnQxKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICByZXR1cm4gd2ViMy5ldGgubmV0LmdldElkKCk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBfY29udGV4dC50MSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBfY29udGV4dC50MiA9IF9jb250ZXh0LnQxOwogICAgICAgICAgICBjdXJyZW50TmV0d29ya0lkID0gKDAsIF9jb250ZXh0LnQwKShfY29udGV4dC50Mik7CiAgICAgICAgICAgIG5ldHdvcmsudmFsdWUgPSB7CiAgICAgICAgICAgICAgaWQ6IGN1cnJlbnROZXR3b3JrSWQsCiAgICAgICAgICAgICAgaXNDb3JyZWN0TmV0d29yazogQUNDRVBUX05FVFdPUksuaWQgPT09IGN1cnJlbnROZXR3b3JrSWQKICAgICAgICAgICAgfTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICByZXR1cm4gY2hlY2tHYXNQcmljZSgpOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGlmIChuZXR3b3JrSWQpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIEFDQ0VQVF9ORVRXT1JLLmlkID09PSBjdXJyZW50TmV0d29ya0lkKTsKCiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGNoZWNrTmV0d29yayhfeCkgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7CmV4cG9ydCB2YXIgYWRkTmV0d29ya0xpc3RlbmVyID0gZnVuY3Rpb24gYWRkTmV0d29ya0xpc3RlbmVyKCkgewogIHdpbmRvdy5ldGhlcmV1bS5vbignbmV0d29ya0NoYW5nZWQnLCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihuZXR3b3JrSWQpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIGNoZWNrTmV0d29yayhuZXR3b3JrSWQpOwoKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gZ2V0QWNjb3VudCgpOwoKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiAoX3gyKSB7CiAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCkpOwp9OwpleHBvcnQgdmFyIGNoZWNrR2FzUHJpY2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiB3ZWIzLmV0aC5nZXRHYXNQcmljZSgpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgbmV0d29yay52YWx1ZS5nYXNQcmljZSA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICBuZXR3b3JrLnZhbHVlLmh1bWFuaXplZEdhc1ByaWNlID0gZnJvbVdlaVRvR3dlaShuZXR3b3JrLnZhbHVlLmdhc1ByaWNlKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUzKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBjaGVja0dhc1ByaWNlKCkgewogICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOwpleHBvcnQgdmFyIHNlbmRUcmFuc2FjdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWY1ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNShfcmVmNCkgewogICAgdmFyIGZyb20sIHRvLCB2YWx1ZSwgZXhwZWN0ZWRCbG9ja1RpbWU7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBmcm9tID0gX3JlZjQuZnJvbSwgdG8gPSBfcmVmNC50bywgdmFsdWUgPSBfcmVmNC52YWx1ZTsKICAgICAgICAgICAgZXhwZWN0ZWRCbG9ja1RpbWUgPSAxMDAwOwogICAgICAgICAgICB0cmFuc2FjdGlvbi52YWx1ZSA9IHsKICAgICAgICAgICAgICBmcm9tOiBmcm9tLAogICAgICAgICAgICAgIHRvOiB0bywKICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsCiAgICAgICAgICAgICAgdHhQcm9jZXNzaW5nOiB0cnVlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIHdlYjMuZXRoLnNlbmRUcmFuc2FjdGlvbih7CiAgICAgICAgICAgICAgZnJvbTogZnJvbSwKICAgICAgICAgICAgICB0bzogdG8sCiAgICAgICAgICAgICAgdmFsdWU6IHRvV2VpKHZhbHVlLCAnZXRoZXInKQogICAgICAgICAgICB9LCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHZhciBfcmVmNiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoZXJyLCB0cmFuc2FjdGlvbkhhc2gpIHsKICAgICAgICAgICAgICAgIHZhciB0cmFuc2FjdGlvblJlY2VpcHQ7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24udmFsdWUudHhQcm9jZXNzaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZU5vdGlmaWNhdGlvbih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyMTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3VibWl0dGVkIHRyYW5zYWN0aW9uIHdpdGggaGFzaDogJywgdHJhbnNhY3Rpb25IYXNoKTsKICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24udmFsdWUuaGFzaCA9IHRyYW5zYWN0aW9uSGFzaDsKICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25SZWNlaXB0ID0gbnVsbDsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRyYW5zYWN0aW9uUmVjZWlwdCA9PSBudWxsKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3ZWIzLmV0aC5nZXRUcmFuc2FjdGlvblJlY2VpcHQodHJhbnNhY3Rpb25IYXNoKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvblJlY2VpcHQgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQocmVzb2x2ZSwgZXhwZWN0ZWRCbG9ja1RpbWUpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLnZhbHVlLnR4UHJvY2Vzc2luZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVOb3RpZmljYXRpb24oewogICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAiVHggIyIuY29uY2F0KHRyYW5zYWN0aW9uSGFzaCwgIiBjb25maXJtZWQiKQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUJhbGFuY2UoKTsKCiAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR290IHRoZSB0cmFuc2FjdGlvbiByZWNlaXB0OiAnLCB0cmFuc2FjdGlvblJlY2VpcHQpOwoKICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g0LCBfeDUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfcmVmNi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ1LnNlbnQpOwoKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTUpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIHNlbmRUcmFuc2FjdGlvbihfeDMpIHsKICAgIHJldHVybiBfcmVmNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTs="},{"version":3,"sources":["/home/user/Work/ethsender/node_modules/eslint-loader/index.js??ref--14-0!/home/user/Work/ethsender/src/utils/network.ts"],"names":[],"mappings":"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","sourcesContent":["import { CurrentNetwork, Transaction } from '../interfaces/Network'\nimport { ref } from 'vue'\nimport { web3, fromWei, toWei, fromWeiToGwei } from './web3'\nimport { ACCEPT_NETWORK } from '../constants/network'\nimport { getAccount, updateBalance } from './getAccount'\nimport { createNotification } from '../utils/notification'\n\nexport const network = ref<CurrentNetwork | null>(null)\nexport const transaction = ref<Transaction>({\n  from: '',\n  to: '',\n  value: '',\n  txProcessing: false\n})\n\nexport const checkNetwork = async (networkId?: number):Promise<boolean> => {\n  const currentNetworkId = Number(networkId || await web3.eth.net.getId())\n\n  network.value = {\n    id: currentNetworkId,\n    isCorrectNetwork: ACCEPT_NETWORK.id === currentNetworkId\n  }\n  await checkGasPrice()\n\n  if (!networkId) {\n    return ACCEPT_NETWORK.id === currentNetworkId\n  }\n}\n\nexport const addNetworkListener = () => {\n  window.ethereum.on('networkChanged', async (networkId: number) => {\n    await checkNetwork(networkId)\n    await getAccount()\n  })\n}\n\nexport const checkGasPrice = async () => {\n  network.value.gasPrice = await web3.eth.getGasPrice()\n  network.value.humanizedGasPrice = fromWeiToGwei(network.value.gasPrice)\n}\n\nexport const sendTransaction = async ({ from, to, value }:Transaction) => {\n  const expectedBlockTime = 1000\n  transaction.value = {\n    from,\n    to,\n    value,\n    txProcessing: true\n  }\n  return await web3.eth.sendTransaction({\n    from: from,\n    to: to,\n    value: toWei(value, 'ether')\n  } as Transaction, async (err, transactionHash) => {\n    if (err) {\n      transaction.value.txProcessing = false\n      createNotification({ type: 'error', message: err.message })\n    } else {\n      console.log('Submitted transaction with hash: ', transactionHash)\n      transaction.value.hash = transactionHash\n      let transactionReceipt = null\n      while (transactionReceipt == null) { // Waiting expectedBlockTime until the transaction is mined\n        transactionReceipt = await web3.eth.getTransactionReceipt(transactionHash)\n        await new Promise(resolve => setTimeout(resolve, expectedBlockTime))\n      }\n      transaction.value.txProcessing = false\n      createNotification({ type: 'success', message:  `Tx #${transactionHash} confirmed` })\n      await updateBalance()\n      console.log('Got the transaction receipt: ', transactionReceipt)\n    }\n  })\n}\n"],"sourceRoot":""}]}